import{C as t,n as o}from"./cookie-universal-common.86071cdf.js";const e=t();e.get("token");async function a({method:t,path:a,data:n,params:r,token:i,cookie:c,auxUrl:s}){let p=s||`${o}/api/${a}`;const h=window.fetch,d={method:t,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",cookie:c},mode:"no-cors"};n&&(d.body=JSON.stringify(n)),"GET"==t&&r&&(p+="?"+Object.keys(r).map(t=>t+"="+r[t]).join("&"));let m=e.get("token");i?d.headers.Authorization=`Bearer ${i}`:m&&(d.headers.Authorization=`Bearer ${m}`);try{let t=await h(p,d),o=await t.text();if(!t.ok)throw o;try{return JSON.parse(o)}catch(t){return o}}catch(t){throw t}}function n(t,o,e,n){return a({method:"GET",path:t,params:o,token:e,cookie:n})}function r(t,o,e,n){return a({method:"POST",path:t,data:o,token:e,auxUrl:n})}export{n as g,r as p};
