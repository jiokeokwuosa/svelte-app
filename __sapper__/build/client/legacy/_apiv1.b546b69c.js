import{C as e,_ as t,n as a}from"./cookie-universal-common.9fbb4a0b.js";var r=e();r.get("token");function n(e){var n,o,c,s,p,i,u,h,d,k,m,f,l;return t.async(function(x){for(;;)switch(x.prev=x.next){case 0:return n=e.method,o=e.path,c=e.data,s=e.params,p=e.token,i=e.cookie,u=e.auxUrl,h=u||"".concat(a,"/api/").concat(o),d=window.fetch,k={method:n,headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",cookie:i},mode:"no-cors"},c&&(k.body=JSON.stringify(c)),"GET"==n&&s&&(h+="?"+Object.keys(s).map(function(e){return e+"="+s[e]}).join("&")),m=r.get("token"),p?k.headers.Authorization="Bearer ".concat(p):m&&(k.headers.Authorization="Bearer ".concat(m)),x.prev=8,x.next=11,t.awrap(d(h,k));case 11:return f=x.sent,x.next=14,t.awrap(f.text());case 14:if(l=x.sent,f.ok){x.next=17;break}throw l;case 17:return x.prev=17,x.abrupt("return",JSON.parse(l));case 21:return x.prev=21,x.t0=x.catch(17),x.abrupt("return",l);case 24:x.next=29;break;case 26:throw x.prev=26,x.t1=x.catch(8),x.t1;case 29:case"end":return x.stop()}},null,null,[[8,26],[17,21]])}function o(e,t,a,r){return n({method:"GET",path:e,params:t,token:a,cookie:r})}function c(e,t,a,r){return n({method:"POST",path:e,data:t,token:a,auxUrl:r})}export{o as g,c as p};
