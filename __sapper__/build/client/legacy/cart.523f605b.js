import{w as t}from"./app.a7ca9b52.js";import{C as r,_ as e}from"./cookie-universal-common.9fbb4a0b.js";import{g as n,p as a}from"./api.c40174e7.js";r();var o,s,c,u=(o=t({items:[],qty:0,subtotal:0,discount:0,total:0,offer_total:0,showCart:!1,promo:null}),s=o.subscribe,c=o.set,{subscribe:s,fetch:function(){var t;return e.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.awrap(n("cart",null));case 3:return t=r.sent,c(t),r.abrupt("return",t);case 8:r.prev=8,r.t0=r.catch(0);case 10:case"end":return r.stop()}},null,null,[[0,8]])},add:function(t){var r;return e.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.awrap(a("cart/addE",t));case 3:return r=n.sent,c(r),n.abrupt("return",r);case 8:throw n.prev=8,n.t0=n.catch(0),n.t0;case 11:case"end":return n.stop()}},null,null,[[0,8]])},setPromo:function(t){c({promo:t.details,total:t.amount})},showCart:function(t){function r(){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}(function(){return showCart}),setCart:function(t){c({items:t.items||[],qty:t.qty,discount:t.discount||0,subtotal:t.subtotal,total:t.total,offer_total:t.offer_total})},toggleCart:function(t){showCart=t},checkout:function(t){var r,n,o,s;return e.async(function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.paymentMethod,n=t.address,i.prev=1,i.next=4,e.awrap(a("orders",{address:n,paymentMethod:r||"COD"}));case 4:return o=i.sent,i.next=7,e.awrap(u.fetch());case 7:return s=i.sent,c(s),i.abrupt("return",o);case 12:throw i.prev=12,i.t0=i.catch(1),i.t0;case 15:case"end":return i.stop()}},null,null,[[1,12]])}});export{u as c};
