import{S as e,i as a,s as t,m as s,a as r,e as n,o as l,f as o,c as i,q as c,k as d,n as u,v as h,w as f,x as m,d as p,t as v,b as g,g as w,h as $,L as b,I as y,O as x,j as E,F as I,a7 as N,ab as V,P,Q as k,R as j,E as D,W as S,a6 as T,ac as O,y as R,J as z}from"./index.4905b719.js";import{C as A}from"./cookie-universal-common.86071cdf.js";import{a as M,g as U}from"./app.3fad8882.js";import{g as B,p as H}from"./api.818ad135.js";import"./cart.01a166b2.js";import{T as L}from"./Textbox.7ead876e.js";import"./index.fd4d24bb.js";import{P as C}from"./Passwordbox.5caa9663.js";import{H as G}from"./Header.d9e0c410.js";import"./auth.f85113de.js";import{f as F,a as Y}from"./pageFade.073d6706.js";function q(e){let a,t,s;return{c(){a=n("span"),t=v("SIGN UP"),s=v("\r\n                TO YOUR ACCOUNT"),this.h()},l(e){a=i(e,"SPAN",{class:!0});var r=g(a);t=w(r,"SIGN UP"),r.forEach(p),s=w(e,"\r\n                TO YOUR ACCOUNT"),this.h()},h(){$(a,"class","font-extrabold")},m(e,r){d(e,a,r),E(a,t),d(e,s,r)},d(e){e&&p(a),e&&p(s)}}}function J(e){let a,t;return{c(){a=n("span"),t=v("SIGN IN"),this.h()},l(e){a=i(e,"SPAN",{class:!0});var s=g(a);t=w(s,"SIGN IN"),s.forEach(p),this.h()},h(){$(a,"class","font-extrabold")},m(e,s){d(e,a,s),E(a,t)},d(e){e&&p(a)}}}function Q(e){let a,t;return{c(){a=n("div"),t=v(e[1]),this.h()},l(s){a=i(s,"DIV",{class:!0});var r=g(a);t=w(r,e[1]),r.forEach(p),this.h()},h(){$(a,"class","text-green-600 mb-5 text-center")},m(e,s){d(e,a,s),E(a,t)},p(e,a){2&a[0]&&R(t,e[1])},d(e){e&&p(a)}}}function W(e){let a,t;return{c(){a=n("div"),t=v(e[8]),this.h()},l(s){a=i(s,"DIV",{class:!0});var r=g(a);t=w(r,e[8]),r.forEach(p),this.h()},h(){$(a,"class","text-red-600 mb-5 text-center")},m(e,s){d(e,a,s),E(a,t)},p(e,a){256&a[0]&&R(t,e[8])},d(e){e&&p(a)}}}function _(e){let a,t,v,g,w,$;const b=new L({props:{value:e[11],label:"Fisrt Name",class:"w-full"}}),y=new L({props:{value:e[12],label:"Last Name",class:"w-full"}});return{c(){s(b.$$.fragment),a=r(),t=n("br"),v=r(),s(y.$$.fragment),g=r(),w=n("br")},l(e){l(b.$$.fragment,e),a=o(e),t=i(e,"BR",{}),v=o(e),l(y.$$.fragment,e),g=o(e),w=i(e,"BR",{})},m(e,s){c(b,e,s),d(e,a,s),d(e,t,s),d(e,v,s),c(y,e,s),d(e,g,s),d(e,w,s),$=!0},p:u,i(e){$||(h(b.$$.fragment,e),h(y.$$.fragment,e),$=!0)},o(e){f(b.$$.fragment,e),f(y.$$.fragment,e),$=!1},d(e){m(b,e),e&&p(a),e&&p(t),e&&p(v),m(y,e),e&&p(g),e&&p(w)}}}function K(e){let a,t,s,l,c,h,f,m,v,w,x,I;return{c(){a=n("div"),t=n("div"),s=n("div"),l=r(),c=n("div"),h=r(),f=n("div"),m=r(),v=n("div"),w=r(),x=n("input"),this.h()},l(e){a=i(e,"DIV",{class:!0});var r=g(a);t=i(r,"DIV",{class:!0});var n=g(t);s=i(n,"DIV",{id:!0,class:!0}),g(s).forEach(p),l=o(n),c=i(n,"DIV",{id:!0,class:!0}),g(c).forEach(p),h=o(n),f=i(n,"DIV",{id:!0,class:!0}),g(f).forEach(p),m=o(n),v=i(n,"DIV",{id:!0,class:!0}),g(v).forEach(p),w=o(n),x=i(n,"INPUT",{name:!0,class:!0,maxlength:!0,autocomplete:!0}),n.forEach(p),r.forEach(p),this.h()},h(){$(s,"id","wraper1"),$(s,"class","otp-seperator w-1 h-1 rounded absolute svelte-3hwxzk"),b(s,"wraper-hide",e[5].length>0),$(c,"id","wraper2"),$(c,"class","otp-seperator w-1 h-1 rounded absolute svelte-3hwxzk"),b(c,"wraper-hide",e[5].length>1),$(f,"id","wraper3"),$(f,"class","otp-seperator w-1 h-1 rounded absolute svelte-3hwxzk"),b(f,"wraper-hide",e[5].length>2),$(v,"id","wraper4"),$(v,"class","otp-seperator w-1 h-1 rounded absolute svelte-3hwxzk"),b(v,"wraper-hide",e[5].length>3),$(x,"name","otp"),$(x,"class","otp-content outline-none pl-4 otp-content w-32\r\n                      bg-transparent border border-gray-400 svelte-3hwxzk"),$(x,"maxlength","4"),$(x,"autocomplete","off"),$(t,"class","otp-container svelte-3hwxzk"),$(a,"class"," flex justify-center text-center"),I=y(x,"input",e[25])},m(r,n){d(r,a,n),E(a,t),E(t,s),E(t,l),E(t,c),E(t,h),E(t,f),E(t,m),E(t,v),E(t,w),E(t,x),z(x,e[5])},p(e,a){32&a[0]&&b(s,"wraper-hide",e[5].length>0),32&a[0]&&b(c,"wraper-hide",e[5].length>1),32&a[0]&&b(f,"wraper-hide",e[5].length>2),32&a[0]&&b(v,"wraper-hide",e[5].length>3),32&a[0]&&x.value!==e[5]&&z(x,e[5])},i:u,o:u,d(e){e&&p(a),I()}}}function X(e){let a,t;function r(a){e[24].call(null,a)}let n={label:"Password",cls:"w-full"};void 0!==e[4]&&(n.value=e[4]);const o=new C({props:n});return P.push(()=>k(o,"value",r)),{c(){s(o.$$.fragment)},l(e){l(o.$$.fragment,e)},m(e,a){c(o,e,a),t=!0},p(e,t){const s={};!a&&16&t[0]&&(a=!0,s.value=e[4],j(()=>a=!1)),o.$set(s)},i(e){t||(h(o.$$.fragment,e),t=!0)},o(e){f(o.$$.fragment,e),t=!1},d(e){m(o,e)}}}function Z(e){let a;return{c(){a=v(e[7])},l(t){a=w(t,e[7])},m(e,t){d(e,a,t)},p(e,t){128&t[0]&&R(a,e[7])},d(e){e&&p(a)}}}function ee(e){let a,t;return{c(){a=n("img"),this.h()},l(e){a=i(e,"IMG",{src:!0,alt:!0}),this.h()},h(){a.src!==(t="/loading.svg")&&$(a,"src","/loading.svg"),$(a,"alt",""),b(a,"loading",e[0])},m(e,t){d(e,a,t)},p(e,t){1&t[0]&&b(a,"loading",e[0])},d(e){e&&p(a)}}}function ae(e){let a,t,u,V,O,R,z,A,M,U,B,H,C,ae,te,se,re,ne,le,oe,ie,ce,de,ue,he,fe,me,pe,ve,ge,we,$e,be,ye,xe,Ee,Ie;const Ne=new G({props:{home:!0}});function Ve(e,a){return e[2]?q:J}let Pe=Ve(e),ke=Pe(e);function je(e,a){return e[8]?W:e[1]?Q:void 0}let De=je(e),Se=De&&De(e);function Te(a){e[23].call(null,a)}let Oe={label:"Email/Phone"};void 0!==e[3]&&(Oe.value=e[3]);const Re=new L({props:Oe});P.push(()=>k(Re,"value",Te));let ze=e[2]&&_(e);const Ae=[X,K],Me=[];function Ue(e,a){return!e[9]&&e[6]?0:e[6]?1:-1}function Be(e,a){return e[0]?ee:Z}~(he=Ue(e))&&(fe=Me[he]=Ae[he](e));let He=Be(e),Le=He(e);return{c(){a=n("meta"),t=n("meta"),u=r(),V=n("main"),s(Ne.$$.fragment),O=r(),R=n("div"),z=n("div"),A=n("div"),M=n("div"),U=n("div"),B=n("p"),H=v("SMS provider configured only for Indian Numbers. Please use email\r\n              instead"),C=r(),ae=n("div"),te=n("h1"),ke.c(),se=r(),re=n("form"),ne=n("div"),Se&&Se.c(),le=r(),s(Re.$$.fragment),ie=r(),ce=n("br"),de=r(),ze&&ze.c(),ue=r(),fe&&fe.c(),me=r(),pe=n("br"),ve=r(),ge=n("br"),we=r(),$e=n("div"),be=n("button"),Le.c(),this.h()},l(e){a=i(e,"META",{"data-hid":!0,name:!0,content:!0}),t=i(e,"META",{"data-hid":!0,name:!0,content:!0}),u=o(e),V=i(e,"MAIN",{});var s=g(V);l(Ne.$$.fragment,s),O=o(s),R=i(s,"DIV",{class:!0});var r=g(R);z=i(r,"DIV",{class:!0});var n=g(z);A=i(n,"DIV",{class:!0});var c=g(A);M=i(c,"DIV",{class:!0});var d=g(M);U=i(d,"DIV",{});var h=g(U);B=i(h,"P",{class:!0});var f=g(B);H=w(f,"SMS provider configured only for Indian Numbers. Please use email\r\n              instead"),f.forEach(p),h.forEach(p),C=o(d),ae=i(d,"DIV",{class:!0});var m=g(ae);te=i(m,"H1",{class:!0});var v=g(te);ke.l(v),v.forEach(p),m.forEach(p),se=o(d),re=i(d,"FORM",{class:!0});var $=g(re);ne=i($,"DIV",{class:!0});var b=g(ne);Se&&Se.l(b),le=o(b),l(Re.$$.fragment,b),ie=o(b),ce=i(b,"BR",{}),de=o(b),ze&&ze.l(b),ue=o(b),fe&&fe.l(b),me=o(b),pe=i(b,"BR",{}),ve=o(b),ge=i(b,"BR",{}),we=o(b),$e=i(b,"DIV",{class:!0});var y=g($e);be=i(y,"BUTTON",{type:!0,disabled:!0,class:!0});var x=g(be);Le.l(x),x.forEach(p),y.forEach(p),b.forEach(p),$.forEach(p),d.forEach(p),c.forEach(p),n.forEach(p),r.forEach(p),s.forEach(p),this.h()},h(){document.title="Login to Hopyshopy",$(a,"data-hid","description"),$(a,"name","description"),$(a,"content","Login to Hopyshopy"),$(t,"data-hid","og:title"),$(t,"name","og_title"),$(t,"content","Login to Hopyshopy"),$(B,"class","mb-2 p-2 text-xs bg-yellow-400 rounded"),$(te,"class","text-xl mb-6 text-left p-3"),$(ae,"class","p-0 secondary text-white rounded rounded-b-none"),$(be,"type","submit"),be.disabled=e[0],$(be,"class","flex items-center justify-center h-14 text-2xl\r\n                  outline-none w-full font-bold py-2 rounded primary"),b(be,"primary",!e[0]),b(be,"border",e[0]),$($e,"class","flex items-center justify-between"),$(ne,"class","p-6 lg:p-12"),$(re,"class","center bg-white"),$(M,"class","w-full md:w-1/2 lg:w-1/3 mb-6 rounded shadow-2xl"),$(A,"class","container mx-auto flex items-center justify-center svelte-3hwxzk"),$(z,"class","h-full px-4"),$(R,"class","relative z-50"),Ie=y(re,"submit",x(e[13]))},m(e,s){E(document.head,a),E(document.head,t),d(e,u,s),d(e,V,s),c(Ne,V,null),E(V,O),E(V,R),E(R,z),E(z,A),E(A,M),E(M,U),E(U,B),E(B,H),E(M,C),E(M,ae),E(ae,te),ke.m(te,null),E(M,se),E(M,re),E(re,ne),Se&&Se.m(ne,null),E(ne,le),c(Re,ne,null),E(ne,ie),E(ne,ce),E(ne,de),ze&&ze.m(ne,null),E(ne,ue),~he&&Me[he].m(ne,null),E(ne,me),E(ne,pe),E(ne,ve),E(ne,ge),E(ne,we),E(ne,$e),E($e,be),Le.m(be,null),Ee=!0},p(e,a){Pe!==(Pe=Ve(e))&&(ke.d(1),(ke=Pe(e))&&(ke.c(),ke.m(te,null))),De===(De=je(e))&&Se?Se.p(e,a):(Se&&Se.d(1),(Se=De&&De(e))&&(Se.c(),Se.m(ne,le)));const t={};!oe&&8&a[0]&&(oe=!0,t.value=e[3],j(()=>oe=!1)),Re.$set(t),e[2]?ze?(ze.p(e,a),h(ze,1)):((ze=_(e)).c(),h(ze,1),ze.m(ne,ue)):ze&&(D(),f(ze,1,1,()=>{ze=null}),I());let s=he;(he=Ue(e))===s?~he&&Me[he].p(e,a):(fe&&(D(),f(Me[s],1,1,()=>{Me[s]=null}),I()),~he?((fe=Me[he])||(fe=Me[he]=Ae[he](e)).c(),h(fe,1),fe.m(ne,me)):fe=null),He===(He=Be(e))&&Le?Le.p(e,a):(Le.d(1),(Le=He(e))&&(Le.c(),Le.m(be,null))),(!Ee||1&a[0])&&(be.disabled=e[0]),1&a[0]&&b(be,"primary",!e[0]),1&a[0]&&b(be,"border",e[0])},i(e){Ee||(h(Ne.$$.fragment,e),h(Re.$$.fragment,e),h(ze),h(fe),S(()=>{xe&&xe.end(1),ye||(ye=T(V,Y,{})),ye.start()}),Ee=!0)},o(e){f(Ne.$$.fragment,e),f(Re.$$.fragment,e),f(ze),f(fe),ye&&ye.invalidate(),xe=N(V,F,{}),Ee=!1},d(e){p(a),p(t),e&&p(u),e&&p(V),m(Ne),ke.d(),Se&&Se.d(),m(Re),ze&&ze.d(),~he&&Me[he].d(),Le.d(),e&&xe&&xe.end(),Ie()}}}function te(e,a,t){let s;const{session:r,page:n}=M();V(e,r,e=>t(15,s=e));const l=A();let o,i,c=!1,d=null,u=!1,h="",f="",m="",p="",v="",g=!1,w=/^[+()\d-]+$/,$="Verify",b=null;async function y(){if(t(0,c=!0),g)try{t(0,c=!0);const e=await H("auth/local",{uid:h,password:v});O(r,s.user=e.user,s),O(r,s.token=e.token,s),l.set("token",e.token),U("/")}catch(e){t(8,b=e)}finally{t(0,c=!1)}else try{await B("users/phone/"+h);return t(6,g=!0),void t(1,d="Please enter OTP sent to your Mobile")}catch(e){t(8,b=e),console.log("err...",e)}finally{t(0,c=!1)}}async function x(){if(g)try{t(0,c=!0);let e={};e=u?await H("users",{email:h,firstName:m,lastName:p,password:f}):await H("auth/local",{uid:h,password:f}),O(r,s.user=e.user,s),O(r,s.token=e.token,s),l.set("token",e.token),U("/")}catch(e){t(6,g=!1),t(8,b=e)}finally{t(6,g=!0),t(0,c=!1)}else try{await B("users/email/"+h);return t(6,g=!0),void t(1,d="Please enter your password")}catch(e){e.response&&"400"==e.response.status?(t(2,u=!0),t(6,g=!0),console.log("400 err...",e.response.status)):(t(2,u=!0),t(6,g=!0),console.log("err...",e.toString())),t(8,b="")}finally{t(6,g=!0),t(0,c=!1)}}return e.$$.update=(()=>{8&e.$$.dirty[0]&&t(14,o=h.includes("@")),8&e.$$.dirty[0]&&t(9,i=!!(h.length>=10&&h.match(w))),32&e.$$.dirty[0]&&v&&4==v.length&&y(),8&e.$$.dirty[0]&&h&&(t(6,g=!1),t(2,u=!1)),16964&e.$$.dirty[0]&&t(7,$=u?"Signup New Account":i||o||g?i&&!g?"Verify Phone":o&&!g?"Verify Email":i&&g?"Verify OTP":"Login Now":"Verify")}),[c,d,u,h,f,v,g,$,b,i,r,m,p,async function(){t(1,d=t(8,b=null)),h&&""!=h?i||o?i?await y():await x():t(8,b="Entered email is not valid"):t(8,b="Please enter your email/phone no")},o,s,n,l,"disable",{},w,y,x,function(e){t(3,h=e)},function(e){t(4,f=e)},function(){v=this.value,t(5,v)}]}export default class extends e{constructor(e){super(),a(this,e,te,ae,t,{})}}
