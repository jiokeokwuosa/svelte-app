'use strict';

var index = require('./index-7460d1f3.js');
require('./index-4169654c.js');

const subscriber_queue = [];
/**
 * Create a `Writable` store that allows both updating and reading by subscription.
 * @param {*=}value initial value
 * @param {StartStopNotifier=}start start and stop notifications for subscriptions
 */
function writable(value, start = index.noop) {
    let stop;
    const subscribers = [];
    function set(new_value) {
        if (index.safe_not_equal(value, new_value)) {
            value = new_value;
            if (stop) { // store is ready
                const run_queue = !subscriber_queue.length;
                for (let i = 0; i < subscribers.length; i += 1) {
                    const s = subscribers[i];
                    s[1]();
                    subscriber_queue.push(s, value);
                }
                if (run_queue) {
                    for (let i = 0; i < subscriber_queue.length; i += 2) {
                        subscriber_queue[i][0](subscriber_queue[i + 1]);
                    }
                    subscriber_queue.length = 0;
                }
            }
        }
    }
    function update(fn) {
        set(fn(value));
    }
    function subscribe(run, invalidate = index.noop) {
        const subscriber = [run, invalidate];
        subscribers.push(subscriber);
        if (subscribers.length === 1) {
            stop = start(set) || index.noop;
        }
        run(value);
        return () => {
            const index = subscribers.indexOf(subscriber);
            if (index !== -1) {
                subscribers.splice(index, 1);
            }
            if (subscribers.length === 0) {
                stop();
                stop = null;
            }
        };
    }
    return { set, update, subscribe };
}

const CONTEXT_KEY = {};

const preload = () => ({});

/* src\components\Footer.svelte generated by Svelte v3.16.4 */

const Footer = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `${($$result.head += `<script src="${"https://code.jquery.com/jquery-3.2.1.slim.min.js"}" integrity="${"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"}" crossorigin="${"anonymous"}"></script><script src="${"ampz/js/jquery.min.js"}"></script><script type="${"text/javascript"}" src="${"ampz/plugins/slick/slick.min.js"}"></script><script type="${"text/javascript"}" src="${"ampz/plugins/slick/slick-options.js"}"></script>`, "")}
<footer>
    <div class="${"footer"}">
        <div class="${"footer-content"}">
            <div class="${"col"}">
                <p class="${"title"}">Company</p>
                <p><a href="${"/about-ampz"}">About Us</a></p>
                <p><a href="${"/about-ampz#team"}">Team</a></p>
                <p><a href="${"#careers"}" data-toggle="${"modal"}" data-target="${"#careers"}">Careers</a></p>
                <p><a href="${"/product#talent"}">Talent Portfolio</a></p>
            </div>
            <div class="${"col"}">
                <p class="${"title"}">Products</p>
                <p><a href="${"/product#services"}">Platforms and Services</a></p>
                <p><a href="${"/product#programme"}">Programs</a></p>               
            </div>
            <div class="${"col"}">
                <p class="${"title"}">Legal</p>
                <p><a href="${"/terms"}">Terms and Conditions</a></p>
            </div>
            <div class="${"col"}">
                <p class="${"title"}">Contact</p>
                <p>
                    <a href="${"https://twitter.com/ampz_tv"}" target="${"_blank"}"><img src="${"img/twitter.png"}" alt="${""}"></a>
                    <a href="${"https://www.linkedin.com/company/ampz-tv/"}" target="${"_blank"}"><img src="${"img/linkedin.png"}" alt="${""}"></a>
                    <a href="${"https://web.facebook.com/ampz.tv/"}" target="${"_blank"}"><img src="${"img/facebook.png"}" alt="${""}"></a>
                    <a href="${"https://www.instagram.com/ampz.tv/"}" target="${"_blank"}"><img src="${"img/instagram.png"}" alt="${""}"></a>
                </p>
                <p><a href="${"mailto:info@ampz.tv"}">info@ampz.tv</a></p>              
            </div>
        </div> 
         <p class="${"mycopyright"}">© Copyright AMPZ.TV Limited 2019</p>        
    </div>    
</footer>
 
<div class="${"modal fade"}" id="${"careers"}" tabindex="${"-1"}" role="${"dialog"}" aria-labelledby="${"careersTitle"}" aria-hidden="${"true"}">
  <div class="${"modal-dialog"}" role="${"document"}">
    <div class="${"modal-content"}">
      <div class="${"modal-header"}">
        <h5 class="${"modal-title"}" id="${"careersTitle"}">AMPZ Careers</h5>
        <button type="${"button"}" class="${"close"}" data-dismiss="${"modal"}" aria-label="${"Close"}">
          <span aria-hidden="${"true"}">×</span>
        </button>
      </div>
      <div class="${"modal-body"}">
        <div class="${"container-fluid"}">
          <form action="${""}">            
            <div class="${"row shift1"}">
              <div class="${"col-md-12"}">
                <p>AMPZ is a Nigerian start-up leveraging on technology to revolutionize the sports ecosystem in Africa. We are currently on a mission to power the dreams of African sports talents by connecting them to a world of opportunities and we can’t achieve this without you.<br><br>If you’re up for your next challenge, you can join our team of champs in breaking barriers by completing the short form below! </p> <br>
              </div>
            </div>
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <input type="${"text"}" placeholder="${"First Name"}">
              </div>
            </div>
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <input type="${"text"}" placeholder="${"Last Name"}">
              </div>
            </div>             
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <input type="${"email"}" placeholder="${"Email"}">
              </div>
            </div>
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <input type="${"text"}" placeholder="${"Phone Number eg (2347037382546)"}">
              </div>
            </div>
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <textarea name="${""}" id="${""}" cols="${"30"}" rows="${"10"}" placeholder="${"Briefly tell us about yourself "}">${"\r\n                "}</textarea>
              </div>
            </div> 
            <div class="${"row shift1"}">
              <div class="${"col-md-12"}">
                Which position are you interested in?  <br>
                <input type="${"checkbox"}" name="${""}" id="${""}" class="${"shift2"}"> Front-End Engineer <br>
                <input type="${"checkbox"}" name="${""}" id="${""}"> Business Development Analyst<br>
                <input type="${"checkbox"}" name="${""}" id="${""}"> Operations Analyst<br>                
              </div>
            </div> 
            <div class="${"row"}">
              <div class="${"col-md-12"}">
                <textarea name="${""}" id="${""}" cols="${"30"}" rows="${"10"}" placeholder="${"What makes you best for the position?"}">${"\r\n                "}</textarea>
              </div>
            </div> 
            <div class="${"row shift1"}">
              <div class="${"col-md-12"}">
                Upload your resume (Doc or PDF only) *
                <input type="${"file"}" name="${""}" id="${""}">
              </div>
            </div>
            <div class="${"row shift1"}">
              <div class="${"col-md-12"}">
                Residential location *  <br>
                <input type="${"radio"}" name="${""}" id="${""}" class="${"shift2"}"> Lagos Island (Ajah, Lekki, Victoria Island)<br>
                <input type="${"radio"}" name="${""}" id="${""}"> Lagos Midland (Obalende, Yaba, Surulere, Anthony)<br>
                <input type="${"radio"}" name="${""}" id="${""}"> Lagos Midland (Obalende, Yaba, Surulere, Anthony)                
              </div>
            </div>      
          </form>          
        </div>
      </div>
      <div class="${"modal-footer"}">
        <button type="${"button"}" class="${"btn btn-secondary"}" data-dismiss="${"modal"}">Close</button>
        <button type="${"button"}" class="${"btn btn-primary"}">Request</button>
      </div>
    </div>
  </div>
</div>`;
});

/* src\routes\_layout.svelte generated by Svelte v3.16.4 */

const Layout = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	return `<main style="${"min-height:92.5vh"}">
  ${$$slots.default ? $$slots.default({}) : ``}
</main>

${index.validate_component(Footer, "Footer").$$render($$result, {}, {}, {})}`;
});

/* src\routes\_error.svelte generated by Svelte v3.16.4 */

const css = {
	code: ".errorCode.svelte-9k5qzi{font-size:150px;color:wheat;text-align:center;background-color:#fff}.back-home.svelte-9k5qzi{color:wheat;font-size:24px;text-decoration:none}",
	map: "{\"version\":3,\"file\":\"_error.svelte\",\"sources\":[\"_error.svelte\"],\"sourcesContent\":[\"<script>\\r\\n  export let status;\\r\\n  export let error;\\r\\n\\r\\n  const dev = \\\"production\\\" === \\\"development\\\";\\r\\n</script>\\r\\n\\r\\n<svelte:head>\\r\\n  <title>{status}</title>\\r\\n</svelte:head>\\r\\n<style>\\r\\n.error404 {\\r\\n    background: url(../img/noise.gif);\\r\\n    background-repeat: repeat;\\r\\n    background-attachment: fixed;\\r\\n}\\r\\n\\r\\n.errorCode{\\r\\n   font-size: 150px;\\r\\n    color: wheat;\\r\\n    text-align: center;\\r\\n    background-color: #fff;\\r\\n}\\r\\n.erroMsg{\\r\\n  font-size: 15px;\\r\\n    color: #f1f0ef;\\r\\n    text-transform: uppercase;\\r\\n    text-align: center;\\r\\n}\\r\\n.back-home {\\r\\n    color: wheat;\\r\\n    font-size: 24px;\\r\\n    text-decoration: none;\\r\\n}\\r\\n</style>\\r\\n<main>\\r\\n  <h1 class=\\\"errorCode\\\">{status}</h1>\\r\\n  <div style=\\\"text-align:center;color: wheat;padding: 5%;\\\"> <a class=\\\"btn back-home\\\" href=\\\"/\\\">&lt; Go Home  </a>\\r\\n</div>\\r\\n  <!-- <p class=\\\"erroMsg\\\">{error.message}</p> -->\\r\\n \\r\\n<h2>Oops, something went wrong.</h2>\\r\\n  {#if dev && error.stack}\\r\\n    <pre>{error.stack}</pre>\\r\\n  {/if}\\r\\n\\r\\n\\r\\n\\r\\n</main>\\r\\n\"],\"names\":[],\"mappings\":\"AAiBA,wBAAU,CAAC,AACR,SAAS,CAAE,KAAK,CACf,KAAK,CAAE,KAAK,CACZ,UAAU,CAAE,MAAM,CAClB,gBAAgB,CAAE,IAAI,AAC1B,CAAC,AAOD,UAAU,cAAC,CAAC,AACR,KAAK,CAAE,KAAK,CACZ,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,IAAI,AACzB,CAAC\"}"
};

const Error$1 = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { status } = $$props;
	let { error } = $$props;
	if ($$props.status === void 0 && $$bindings.status && status !== void 0) $$bindings.status(status);
	if ($$props.error === void 0 && $$bindings.error && error !== void 0) $$bindings.error(error);
	$$result.css.add(css);

	return `${($$result.head += `<title>${index.escape(status)}</title>`, "")}

<main>
  <h1 class="${"errorCode svelte-9k5qzi"}">${index.escape(status)}</h1>
  <div style="${"text-align:center;color: wheat;padding: 5%;"}"> <a class="${"btn back-home svelte-9k5qzi"}" href="${"/"}">&lt; Go Home  </a>
</div>
  
 
<h2>Oops, something went wrong.</h2>
  ${ ``}



</main>`;
});

/* src\node_modules\@sapper\internal\App.svelte generated by Svelte v3.16.4 */

const App = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { stores } = $$props;
	let { error } = $$props;
	let { status } = $$props;
	let { segments } = $$props;
	let { level0 } = $$props;
	let { level1 = null } = $$props;
	let { level2 = null } = $$props;
	index.setContext(CONTEXT_KEY, stores);
	if ($$props.stores === void 0 && $$bindings.stores && stores !== void 0) $$bindings.stores(stores);
	if ($$props.error === void 0 && $$bindings.error && error !== void 0) $$bindings.error(error);
	if ($$props.status === void 0 && $$bindings.status && status !== void 0) $$bindings.status(status);
	if ($$props.segments === void 0 && $$bindings.segments && segments !== void 0) $$bindings.segments(segments);
	if ($$props.level0 === void 0 && $$bindings.level0 && level0 !== void 0) $$bindings.level0(level0);
	if ($$props.level1 === void 0 && $$bindings.level1 && level1 !== void 0) $$bindings.level1(level1);
	if ($$props.level2 === void 0 && $$bindings.level2 && level2 !== void 0) $$bindings.level2(level2);

	return `


${index.validate_component(Layout, "Layout").$$render($$result, Object.assign({ segment: segments[0] }, level0.props), {}, {
		default: () => `
	${error
		? `${index.validate_component(Error$1, "Error").$$render($$result, { error, status }, {}, {})}`
		: `${index.validate_component(level1.component || index.missing_component, "svelte:component").$$render($$result, Object.assign({ segment: segments[1] }, level1.props), {}, {
				default: () => `
			${level2
				? `${index.validate_component(level2.component || index.missing_component, "svelte:component").$$render($$result, Object.assign(level2.props), {}, {})}`
				: ``}
		`
			})}`}
`
	})}`;
});

// This file is generated by Sapper — do not edit it!

const ignore = [/^\/robots.txt$/];

const components = [
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-8a95d414.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./#23423432opportunity-d107dbf0.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:#23423432opportunity.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./#23423423products-41967e86.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:#23423423products.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./#34234234flipkart-5adc9396.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:#34234234flipkart.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-b0b2ad84.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:opportunities/index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./new-cd3788ff.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:opportunities/new.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./[slug]-7999d245.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:opportunities/[slug].svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./#234234login-34d6952b.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:#234234login.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./about-ampz-04543088.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:about-ampz.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-76e2a339.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:waitlist/index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./product-d3d80aba.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:product.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./#43434[slug]-58dee6d7.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:#43434[slug].svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-e6ff3ada.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:search/index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./terms-a7afe600.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:terms.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-5cff4dd0.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:cart/index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./order-success-f58d619b.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:cart/order-success.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./checkout-c5d237e0.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:cart/checkout.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./_layout-e27fc54b.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/_layout.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./index-28306385.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/index.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./password-a3f0eaa1.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/password.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./address-43874089.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/address.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./profile-abbf68e6.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/profile.svelte__"
	},
	{
		js: () => new Promise(function (resolve) { resolve(require('./orders-7f0b0267.js')); }),
		css: "__SAPPER_CSS_PLACEHOLDER:my/orders.svelte__"
	}
];

const routes = (d => [
	{
		// index.svelte
		pattern: /^\/$/,
		parts: [
			{ i: 0 }
		]
	},

	{
		// #23423432opportunity.svelte
		pattern: /^\/%2323423432opportunity\/?$/,
		parts: [
			{ i: 1 }
		]
	},

	{
		// #23423423products.svelte
		pattern: /^\/%2323423423products\/?$/,
		parts: [
			{ i: 2 }
		]
	},

	{
		// #34234234flipkart.svelte
		pattern: /^\/%2334234234flipkart\/?$/,
		parts: [
			{ i: 3 }
		]
	},

	{
		// opportunities/index.svelte
		pattern: /^\/opportunities\/?$/,
		parts: [
			{ i: 4 }
		]
	},

	{
		// opportunities/new.svelte
		pattern: /^\/opportunities\/new\/?$/,
		parts: [
			null,
			{ i: 5 }
		]
	},

	{
		// opportunities/[slug].svelte
		pattern: /^\/opportunities\/([^\/]+?)\/?$/,
		parts: [
			null,
			{ i: 6, params: match => ({ slug: d(match[1]) }) }
		]
	},

	{
		// #234234login.svelte
		pattern: /^\/%23234234login\/?$/,
		parts: [
			{ i: 7 }
		]
	},

	{
		// about-ampz.svelte
		pattern: /^\/about-ampz\/?$/,
		parts: [
			{ i: 8 }
		]
	},

	{
		// waitlist/index.svelte
		pattern: /^\/waitlist\/?$/,
		parts: [
			{ i: 9 }
		]
	},

	{
		// product.svelte
		pattern: /^\/product\/?$/,
		parts: [
			{ i: 10 }
		]
	},

	{
		// #43434[slug].svelte
		pattern: /^\/%2343434([^\/]+?)\/?$/,
		parts: [
			{ i: 11, params: match => ({ slug: d(match[1]) }) }
		]
	},

	{
		// search/index.svelte
		pattern: /^\/search\/?$/,
		parts: [
			{ i: 12 }
		]
	},

	{
		// terms.svelte
		pattern: /^\/terms\/?$/,
		parts: [
			{ i: 13 }
		]
	},

	{
		// cart/index.svelte
		pattern: /^\/cart\/?$/,
		parts: [
			{ i: 14 }
		]
	},

	{
		// cart/order-success.svelte
		pattern: /^\/cart\/order-success\/?$/,
		parts: [
			null,
			{ i: 15 }
		]
	},

	{
		// cart/checkout.svelte
		pattern: /^\/cart\/checkout\/?$/,
		parts: [
			null,
			{ i: 16 }
		]
	},

	{
		// my/index.svelte
		pattern: /^\/my\/?$/,
		parts: [
			{ i: 17 },
			{ i: 18 }
		]
	},

	{
		// my/password.svelte
		pattern: /^\/my\/password\/?$/,
		parts: [
			{ i: 17 },
			{ i: 19 }
		]
	},

	{
		// my/address.svelte
		pattern: /^\/my\/address\/?$/,
		parts: [
			{ i: 17 },
			{ i: 20 }
		]
	},

	{
		// my/profile.svelte
		pattern: /^\/my\/profile\/?$/,
		parts: [
			{ i: 17 },
			{ i: 21 }
		]
	},

	{
		// my/orders.svelte
		pattern: /^\/my\/orders\/?$/,
		parts: [
			{ i: 17 },
			{ i: 22 }
		]
	}
])(decodeURIComponent);

function goto(href, opts = { replaceState: false }) {
	const target = select_target(new URL(href, document.baseURI));

	if (target) {
		_history[opts.replaceState ? 'replaceState' : 'pushState']({ id: cid }, '', href);
		return navigate(target, null).then(() => {});
	}

	location.href = href;
	return new Promise(f => {}); // never resolves
}

const initial_data = typeof __SAPPER__ !== 'undefined' && __SAPPER__;

let ready = false;
let root_component;
let current_token;
let root_preloaded;
let current_branch = [];
let current_query = '{}';

const stores = {
	page: writable({}),
	preloading: writable(null),
	session: writable(initial_data && initial_data.session)
};

let $session;
let session_dirty;

stores.session.subscribe(async value => {
	$session = value;

	if (!ready) return;
	session_dirty = true;

	const target = select_target(new URL(location.href));

	const token = current_token = {};
	const { redirect, props, branch } = await hydrate_target(target);
	if (token !== current_token) return; // a secondary navigation happened while we were loading

	await render(redirect, branch, props, target.page);
});

let prefetching


 = null;

let target;

let uid = 1;

let cid;

const _history = typeof history !== 'undefined' ? history : {
	pushState: (state, title, href) => {},
	replaceState: (state, title, href) => {},
	scrollRestoration: ''
};

const scroll_history = {};

function extract_query(search) {
	const query = Object.create(null);
	if (search.length > 0) {
		search.slice(1).split('&').forEach(searchParam => {
			let [, key, value = ''] = /([^=]*)(?:=(.*))?/.exec(decodeURIComponent(searchParam.replace(/\+/g, ' ')));
			if (typeof query[key] === 'string') query[key] = [query[key]];
			if (typeof query[key] === 'object') (query[key] ).push(value);
			else query[key] = value;
		});
	}
	return query;
}

function select_target(url) {
	if (url.origin !== location.origin) return null;
	if (!url.pathname.startsWith(initial_data.baseUrl)) return null;

	let path = url.pathname.slice(initial_data.baseUrl.length);

	if (path === '') {
		path = '/';
	}

	// avoid accidental clashes between server routes and page routes
	if (ignore.some(pattern => pattern.test(path))) return;

	for (let i = 0; i < routes.length; i += 1) {
		const route = routes[i];

		const match = route.pattern.exec(path);

		if (match) {
			const query = extract_query(url.search);
			const part = route.parts[route.parts.length - 1];
			const params = part.params ? part.params(match) : {};

			const page = { host: location.host, path, query, params };

			return { href: url.href, route, match, page };
		}
	}
}

function scroll_state() {
	return {
		x: pageXOffset,
		y: pageYOffset
	};
}

async function navigate(target, id, noscroll, hash) {
	if (id) {
		// popstate or initial navigation
		cid = id;
	} else {
		const current_scroll = scroll_state();

		// clicked on a link. preserve scroll state
		scroll_history[cid] = current_scroll;

		id = cid = ++uid;
		scroll_history[cid] = noscroll ? current_scroll : { x: 0, y: 0 };
	}

	cid = id;

	if (root_component) stores.preloading.set(true);

	const loaded = prefetching && prefetching.href === target.href ?
		prefetching.promise :
		hydrate_target(target);

	prefetching = null;

	const token = current_token = {};
	const { redirect, props, branch } = await loaded;
	if (token !== current_token) return; // a secondary navigation happened while we were loading

	await render(redirect, branch, props, target.page);
	if (document.activeElement) document.activeElement.blur();

	if (!noscroll) {
		let scroll = scroll_history[id];

		if (hash) {
			// scroll is an element id (from a hash), we need to compute y.
			const deep_linked = document.getElementById(hash.slice(1));

			if (deep_linked) {
				scroll = {
					x: 0,
					y: deep_linked.getBoundingClientRect().top
				};
			}
		}

		scroll_history[cid] = scroll;
		if (scroll) scrollTo(scroll.x, scroll.y);
	}
}

async function render(redirect, branch, props, page) {
	if (redirect) return goto(redirect.location, { replaceState: true });

	stores.page.set(page);
	stores.preloading.set(false);

	if (root_component) {
		root_component.$set(props);
	} else {
		props.stores = {
			page: { subscribe: stores.page.subscribe },
			preloading: { subscribe: stores.preloading.subscribe },
			session: stores.session
		};
		props.level0 = {
			props: await root_preloaded
		};

		// first load — remove SSR'd <head> contents
		const start = document.querySelector('#sapper-head-start');
		const end = document.querySelector('#sapper-head-end');

		if (start && end) {
			while (start.nextSibling !== end) detach(start.nextSibling);
			detach(start);
			detach(end);
		}

		root_component = new App({
			target,
			props,
			hydrate: true
		});
	}

	current_branch = branch;
	current_query = JSON.stringify(page.query);
	ready = true;
	session_dirty = false;
}

function part_changed(i, segment, match, stringified_query) {
	// TODO only check query string changes for preload functions
	// that do in fact depend on it (using static analysis or
	// runtime instrumentation)
	if (stringified_query !== current_query) return true;

	const previous = current_branch[i];

	if (!previous) return false;
	if (segment !== previous.segment) return true;
	if (previous.match) {
		if (JSON.stringify(previous.match.slice(1, i + 2)) !== JSON.stringify(match.slice(1, i + 2))) {
			return true;
		}
	}
}

async function hydrate_target(target)



 {
	const { route, page } = target;
	const segments = page.path.split('/').filter(Boolean);

	let redirect = null;

	const props = { error: null, status: 200, segments: [segments[0]] };

	const preload_context = {
		fetch: (url, opts) => fetch(url, opts),
		redirect: (statusCode, location) => {
			if (redirect && (redirect.statusCode !== statusCode || redirect.location !== location)) {
				throw new Error(`Conflicting redirects`);
			}
			redirect = { statusCode, location };
		},
		error: (status, error) => {
			props.error = typeof error === 'string' ? new Error(error) : error;
			props.status = status;
		}
	};

	if (!root_preloaded) {
		root_preloaded = initial_data.preloaded[0] || preload.call(preload_context, {
			host: page.host,
			path: page.path,
			query: page.query,
			params: {}
		}, $session);
	}

	let branch;
	let l = 1;

	try {
		const stringified_query = JSON.stringify(page.query);
		const match = route.pattern.exec(page.path);

		let segment_dirty = false;

		branch = await Promise.all(route.parts.map(async (part, i) => {
			const segment = segments[i];

			if (part_changed(i, segment, match, stringified_query)) segment_dirty = true;

			props.segments[l] = segments[i + 1]; // TODO make this less confusing
			if (!part) return { segment };

			const j = l++;

			if (!session_dirty && !segment_dirty && current_branch[i] && current_branch[i].part === part.i) {
				return current_branch[i];
			}

			segment_dirty = false;

			const { default: component, preload } = await load_component(components[part.i]);

			let preloaded;
			if (ready || !initial_data.preloaded[i + 1]) {
				preloaded = preload
					? await preload.call(preload_context, {
						host: page.host,
						path: page.path,
						query: page.query,
						params: part.params ? part.params(target.match) : {}
					}, $session)
					: {};
			} else {
				preloaded = initial_data.preloaded[i + 1];
			}

			return (props[`level${j}`] = { component, props: preloaded, segment, match, part: part.i });
		}));
	} catch (error) {
		props.error = error;
		props.status = 500;
		branch = [];
	}

	return { redirect, props, branch };
}

function load_css(chunk) {
	const href = `client/${chunk}`;
	if (document.querySelector(`link[href="${href}"]`)) return;

	return new Promise((fulfil, reject) => {
		const link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = href;

		link.onload = () => fulfil();
		link.onerror = reject;

		document.head.appendChild(link);
	});
}

function load_component(component)


 {
	// TODO this is temporary — once placeholders are
	// always rewritten, scratch the ternary
	const promises = (typeof component.css === 'string' ? [] : component.css.map(load_css));
	promises.unshift(component.js());
	return Promise.all(promises).then(values => values[0]);
}

function detach(node) {
	node.parentNode.removeChild(node);
}

const stores$1 = () => index.getContext(CONTEXT_KEY);

exports.App = App;
exports.error = Error$1;
exports.goto = goto;
exports.root = Layout;
exports.stores$1 = stores$1;
exports.writable = writable;
