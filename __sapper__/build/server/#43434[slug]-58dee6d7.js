'use strict';

var index = require('./index-7460d1f3.js');
var index$2 = require('./index-4169654c.js');
require('cookie-universal');
var api = require('./api-9d8f7f34.js');
var app$1 = require('./app-19cb53d9.js');
require('./Button-8de7f296.js');
var index$3 = require('./index-91c4af8b.js');
require('./index-eb724975.js');
require('./index-c0882747.js');
require('./crossfade-b84107f6.js');
var Header = require('./Header-8a9931f8.js');
require('./auth-c7f15797.js');
require('./cart-d14f702b.js');

/* src\routes\details\_ProductDetails.svelte generated by Svelte v3.16.4 */

function calculateOffPercent(price, mrp) {
	let percent = (mrp - price) * 100 / mrp;
	return Math.round(percent);
}

const ProductDetails = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { product = {} } = $$props;

	if ($$props.product === void 0 && $$bindings.product && product !== void 0) $$bindings.product(product);

	return `<div class="${"w-full md:w-6/12 lg:w-7/12 leading-relaxed"}">
  <div class="${"pb-4 border-b border-gray-200 px-3"}">
    <p class="${"text-2xl text-gray-700 font-semibold"}">${index.escape(product.brandName)}</p>
    <p>${index.escape(product.name)}</p>
  </div>
  ${product
	? `<div class="${"flex flex-wrap"}">
      ${product.flipkart
		? `<div class="${" text-gray-700 py-3"}">
          <div class="${"flex items-center px-3 font-semibold tracking-wider"}">
            <span class="${"text-lg mr-2"}">
              <img src="${"flipkart.jfif"}" alt="${"flipkart"}" style="${"width: 30px; height: 30px;"}">
            </span>
            <span class="${"text-lg mr-2"}">
              ${index.escape(index$3.currency(product.flipkart.specialPrice || product.flipkart.price))}
              ${product.flipkart.shippingCharge
			? `+${index.escape(index$3.currency(product.flipkart.shippingCharge))}`
			: ``}
            </span>
            ${product.flipkart.mrp > (product.flipkart.specialPrice || product.flipkart.price)
			? `<span class="${"font-hairline line-through mr-2"}">
                ${index.escape(index$3.currency(product.flipkart.mrp))}
              </span>`
			: ``}
            ${calculateOffPercent(product.flipkart.specialPrice || product.flipkart.price, product.flipkart.mrp) > 0
			? `<span class="${"text-orange-500 text-xs"}">
                (${index.escape(calculateOffPercent(product.flipkart.specialPrice || product.flipkart.price, product.flipkart.mrp))}%
                OFF)
              </span>`
			: ``}
          </div>
          <div class="${"pl-3"}">3 day delivery</div>
        </div>`
		: ``}
      ${product.amazon
		? `<div class="${" text-gray-700 py-3"}">
          <div class="${"flex items-center px-3 font-semibold tracking-wider"}">
            <span class="${"text-lg mr-2"}">
              <img src="${"amazon.jfif"}" alt="${"amazon"}" style="${"width: 30px; height: 30px;"}">
            </span>
            <span class="${"text-lg mr-2"}">
              ${index.escape(index$3.currency(product.amazon.specialPrice || product.amazon.price))}
            </span>
            ${product.amazon.mrp > (product.amazon.specialPrice || product.amazon.price)
			? `<span class="${"font-hairline line-through mr-2"}">
                ${index.escape(index$3.currency(product.amazon.mrp))}
              </span>`
			: ``}
            ${calculateOffPercent(product.amazon.specialPrice || product.amazon.price, product.amazon.mrp) > 0
			? `<span class="${"text-orange-500 text-xs"}">
                (${index.escape(calculateOffPercent(product.amazon.specialPrice || product.amazon.price, product.amazon.mrp))}%
                OFF)
              </span>`
			: ``}
          </div>
          <br>
          <div class="${"pl-3"}">3 day delivery</div>
        </div>`
		: ``}
      ${product.localPrice
		? `<div class="${" py-3 text-green-700"}">
          <div class="${"flex items-center px-3 font-semibold tracking-wider"}">
            <span class="${"text-lg mr-2"}">
              <img src="${"store.svg"}" alt="${"amazon"}" style="${"width: 30px; height: 30px;"}">
            </span>
            <span class="${"text-lg mr-2"}">${index.escape(index$3.currency(product.localPrice))}</span>
            ${product.flipkart.mrp > product.localPrice
			? `<span class="${"font-hairline line-through mr-2"}">
                ${index.escape(index$3.currency(product.flipkart.mrp))}
              </span>`
			: ``}
            ${calculateOffPercent(product.localPrice, product.flipkart.mrp) > 0
			? `<span class="${"text-orange-500 text-xs"}">
                (${index.escape(calculateOffPercent(product.localPrice, product.flipkart.mrp))}%
                OFF)
              </span>`
			: ``}
          </div>
          <div class="${"pl-3"}">same day delivery</div>
        </div>`
		: ``}
    </div>`
	: ``}
  <div>
    <div class="${"flex mt-4 fixed bottom-0 lg:relative bg-white lg:px-3 p-2 w-full"}" style="${"z-index:9999;"}">
      ${product.amazonUrl
	? `<a target="${"blank"}"${index.add_attribute("href", product.amazonUrl, 0)} class="${"w-1/2 lg:w-1/3 mr-2 bg-red-600 hover:bg-red-500 text-white py-2\r\n          px-3 rounded font-bold text-xs lg:text-lg text-center"}">
          BUY FROM
          <img src="${"amazon.jfif"}" alt="${"amazon"}" style="${"display:inline-block;width: 30px; height: 30px;"}">
        </a>`
	: ``}
      ${product.flipkart && product.flipkart.price
	? `<a target="${"blank"}"${index.add_attribute("href", product.productUrl, 0)} class="${"w-1/2 lg:w-1/3 mr-2 bg-white border border-yellow-700\r\n          text-black py-2 px-3 rounded font-bold text-xs lg:text-lg text-center"}">
          BUY FROM
          <img src="${"/flipkart.jfif"}" alt="${"flipkart"}" style="${"display:inline-block;width: 30px; height: 30px;"}">
        </a>`
	: ``}
      ${product.localPrice
	? `<button target="${"blank"}" class="${"w-1/2 lg:w-1/3 bg-white border border-green-600 text-black py-2\r\n          px-3 rounded font-bold text-xs lg:text-lg text-center"}">
          ADD TO CART
          <img src="${"/store.svg"}" alt="${"local"}" style="${"display:inline-block;width: 30px; height: 30px;"}">
        </button>`
	: ``}
    </div>
    <div class="${"py-8 border-b border-gray-300 px-3"}">
      <p class="${"font-bold text-lg"}">
        TOP FEATURES
        <i class="${"fa fa-tag ml-2 text-gray-600"}" aria-hidden="${"true"}"></i>
      </p>
      <div>
        ${product.keyFeatures
	? `${index.each(product.keyFeatures, k => `<div class="${"w-full my-2 lg:w-3/5 relative text-left px-3 py-2 rounded\r\n              border hover:border-gray-500"}">
              <div class="${"font-bold"}">${index.escape(k)}</div>
            </div>`)}`
	: ``}
      </div>
    </div>
    <div class="${"py-8 border-b border-gray-300 px-3"}">
      <p class="${"font-bold text-lg"}">
        PRODUCT DETAILS
        <i class="${"fa fa-list-alt ml-2 text-gray-600"}" aria-hidden="${"true"}"></i>
      </p>
      <span class="${"text-gray-500"}">${index.escape(product.description)}</span>
      ${product.features
	? `${index.each(product.features, f => `<p class="${"font-bold text-lg"}">${index.escape(f.key)}</p>
          <div class="${"flex flex-wrap"}">
            <div class="${"border-b border-gray-400 mr-4 w-1/2"}">
              <span class="${"text-gray-700 text-sm"}">${index.escape(f.val)}</span>
            </div>
          </div>`)}`
	: ``}
    </div>
  </div>
</div>`;
});

/* src\routes\details\_Breadcrumb.svelte generated by Svelte v3.16.4 */

const css = {
	code: "i.svelte-5t7gwh{margin:2px}",
	map: "{\"version\":3,\"file\":\"_Breadcrumb.svelte\",\"sources\":[\"_Breadcrumb.svelte\"],\"sourcesContent\":[\"<script>\\r\\n  export let product = {};\\r\\n</script>\\r\\n\\r\\n<style>\\r\\n  i {\\r\\n    margin: 2px;\\r\\n  }\\r\\n</style>\\r\\n\\r\\n<div class=\\\"flex flex-wrap items-center p-3 text-xs text-gray-500\\\">\\r\\n  <a href=\\\"/\\\" rel=\\\"prefetch\\\">Home</a>\\r\\n  <i class=\\\"fa fa-angle-right\\\" aria-hidden=\\\"true\\\" />\\r\\n  <a href=\\\"/search\\\" rel=\\\"prefetch\\\">{product.categories}</a>\\r\\n  <span class=\\\"hidden lg:block\\\">\\r\\n    <i class=\\\"fa fa-angle-right\\\" aria-hidden=\\\"true\\\" />\\r\\n    {product.name}\\r\\n  </span>\\r\\n</div>\\r\\n\"],\"names\":[],\"mappings\":\"AAKE,CAAC,cAAC,CAAC,AACD,MAAM,CAAE,GAAG,AACb,CAAC\"}"
};

const Breadcrumb = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let { product = {} } = $$props;
	if ($$props.product === void 0 && $$bindings.product && product !== void 0) $$bindings.product(product);
	$$result.css.add(css);

	return `<div class="${"flex flex-wrap items-center p-3 text-xs text-gray-500"}">
  <a href="${"/"}" rel="${"prefetch"}">Home</a>
  <i class="${"fa fa-angle-right svelte-5t7gwh"}" aria-hidden="${"true"}"></i>
  <a href="${"/search"}" rel="${"prefetch"}">${index.escape(product.categories)}</a>
  <span class="${"hidden lg:block"}">
    <i class="${"fa fa-angle-right svelte-5t7gwh"}" aria-hidden="${"true"}"></i>
    ${index.escape(product.name)}
  </span>
</div>`;
});

/* src\routes\details\_ProductImage.svelte generated by Svelte v3.16.4 */

const css$1 = {
	code: ".zoom.svelte-nu0z1p{transition:transform 0.7s}.zoom.svelte-nu0z1p:hover{transform:scale(1.035)}",
	map: "{\"version\":3,\"file\":\"_ProductImage.svelte\",\"sources\":[\"_ProductImage.svelte\"],\"sourcesContent\":[\"<script>\\r\\n  import { lazyload } from \\\"../../actions/lazyload\\\";\\r\\n  import { stores } from \\\"@sapper/app\\\";\\r\\n  const { preloading, page, session } = stores();\\r\\n  export let product = {},\\r\\n    currentImage = null,\\r\\n    carouselShow = false;\\r\\n\\r\\n  currentImage = product.img && product.img[0];\\r\\n  function showAsCurrentImage(image) {\\r\\n    currentImage = image;\\r\\n  }\\r\\n</script>\\r\\n\\r\\n<style>\\r\\n  .zoom {\\r\\n    transition: transform 0.7s;\\r\\n  }\\r\\n  .zoom:hover {\\r\\n    transform: scale(1.035);\\r\\n  }\\r\\n</style>\\r\\n\\r\\n<div class=\\\"w-full md:w-6/12 lg:w-5/12 flex justify-start flex-wrap px-2\\\">\\r\\n  <div class=\\\"flex-1 xs:order-1 md:order-2 overflow-hidden\\\">\\r\\n    <img\\r\\n      use:lazyload\\r\\n      src={$session.settings.CDN_URL + currentImage + '?tr=w-3,h-3'}\\r\\n      data-src={$session.settings.CDN_URL + currentImage}\\r\\n      alt={product.name}\\r\\n      class=\\\"w-full zoom mb-3\\\"\\r\\n      style=\\\"object-fit: contain; max-height:316px;\\\" />\\r\\n  </div>\\r\\n</div>\\r\\n\"],\"names\":[],\"mappings\":\"AAeE,KAAK,cAAC,CAAC,AACL,UAAU,CAAE,SAAS,CAAC,IAAI,AAC5B,CAAC,AACD,mBAAK,MAAM,AAAC,CAAC,AACX,SAAS,CAAE,MAAM,KAAK,CAAC,AACzB,CAAC\"}"
};

const ProductImage = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	let $session;
	const { preloading, page, session } = app$1.stores$1();
	$session = index.get_store_value(session);

	let { product = {} } = $$props,
		{ currentImage = null } = $$props,
		{ carouselShow = false } = $$props;

	currentImage = product.img && product.img[0];

	if ($$props.product === void 0 && $$bindings.product && product !== void 0) $$bindings.product(product);
	if ($$props.currentImage === void 0 && $$bindings.currentImage && currentImage !== void 0) $$bindings.currentImage(currentImage);
	if ($$props.carouselShow === void 0 && $$bindings.carouselShow && carouselShow !== void 0) $$bindings.carouselShow(carouselShow);
	$$result.css.add(css$1);
	$session = index.get_store_value(session);

	return `<div class="${"w-full md:w-6/12 lg:w-5/12 flex justify-start flex-wrap px-2"}">
  <div class="${"flex-1 xs:order-1 md:order-2 overflow-hidden"}">
    <img${index.add_attribute("src", $session.settings.CDN_URL + currentImage + "?tr=w-3,h-3", 0)}${index.add_attribute("data-src", $session.settings.CDN_URL + currentImage, 0)}${index.add_attribute("alt", product.name, 0)} class="${"w-full zoom mb-3 svelte-nu0z1p"}" style="${"object-fit: contain; max-height:316px;"}">
  </div>
</div>`;
});

/* src\routes\#43434[slug].svelte generated by Svelte v3.16.4 */

async function preload({ params, query }) {
	let product = {}, structuredData = {};

	try {
		product = await api.get(`electronics/${query.id}`);
		if (!product) return;

		structuredData = {
			"@context": "http://schema.org/",
			"@type": "Product",
			name: product && product.name,
			description: product && product.description,
			sku: product && product.sku,
			image: index$2.HOST + (product && product.img)
		};

		return { product, structuredData };
	} catch(e) {
		product = {};
		this.error(500, e.toString());
	}
}

const _43434u5Bslugu5D = index.create_ssr_component(($$result, $$props, $$bindings, $$slots) => {
	const { session } = app$1.stores$1();
	let { product } = $$props;
	if ($$props.product === void 0 && $$bindings.product && product !== void 0) $$bindings.product(product);

	return `${($$result.head += `<title>${index.escape(product && product.name)}</title><meta data-hid="${"description"}" name="${"description"}"${index.add_attribute("content", product && product.description, 0)}><meta data-hid="${"og:title"}" name="${"og_title"}"${index.add_attribute("content", product && product.name, 0)}><meta data-hid="${"og:description"}" name="${"og_description"}" property="${"og:description"}"${index.add_attribute("content", product && product.description, 0)}><meta name="${"og_url"}" property="${"og:url"}"${index.add_attribute("content", product && `${index$2.HOST}/${product.slug}?id=${product._id}`, 0)}><meta name="${"og_image"}" property="${"og:image"}"${index.add_attribute("content", product && product.img && product.img[0], 0)}><meta property="${"og:image:width"}" content="${"800"}"><meta property="${"og:image:height"}" content="${"800"}"><meta name="${"twitter:title"}"${index.add_attribute("content", product && product.name, 0)}><meta name="${"twitter:description"}"${index.add_attribute("content", product && product.description, 0)}><meta name="${"twitter:image:src"}"${index.add_attribute("content", product && product.img && product.img[0], 0)}><meta hid="${"product_name"}" itemprop="${"name"}"${index.add_attribute("content", product && product.name, 0)}><meta hid="${"product_description"}" itemprop="${"description"}"${index.add_attribute("content", product && product.description, 0)}><meta hid="${"product_image"}" itemprop="${"image"}"${index.add_attribute("content", product && product.img && product.img[0], 0)}><meta hid="${"product_price"}" name="${"product_price"}" property="${"product:price"}" itemprop="${"image"}"${index.add_attribute("content", product && product.localPrice, 0)}>`, "")}
${index.validate_component(Header.Header, "Header").$$render($$result, {}, {}, {})}
<main>
  ${!product
	? `Requested product not found.`
	: `${index.validate_component(Breadcrumb, "Breadcrumb").$$render($$result, { product }, {}, {})}
    <div class="${"flex flex-wrap justify-start"}">
      ${index.validate_component(ProductImage, "ProductImage").$$render($$result, { product }, {}, {})}
      ${index.validate_component(ProductDetails, "ProductDetails").$$render($$result, { product }, {}, {})}
      
    </div>`}
</main>`;
});

exports.default = _43434u5Bslugu5D;
exports.preload = preload;
